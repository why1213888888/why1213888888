# 小程序接入指南



## 1. 接入前准备



### 1.1 提交接入申请

向中国银联相关业务对接方提交小程序申请表，按照申请表要求填写 (申请表模板参考附件一)。银联业务对接方将通过银联内部标准的云闪付内容接入流程帮助接入方申请小程序入网。



### 1.2 参数分配

银联根据申请信息，为接入方分配接入参数：

| 参数         | 说明                                                     |
| ----------------- | -------------------------------------------- |
| appId        | 接入方在云闪付APP小程序的唯一标识号                      |
| secret       | 接入方秘钥                                               |
| symmetricKey | 16进制3DES对称密钥，用于解密通过后台接口获取的敏感数据   |
| 小程序id     | 为每一个小程序配置一个加密的应用id，用来访问小程序的标识 |

为确保参数安全，银联将对参数进行加密，并通过邮件方式将参数密钥发送接入方预留联系人邮箱，参数密钥的密码将通过非邮件方式通知联系人。



### 1.3 数据通信

云闪付APP小程序API默认为互联网对接模式。接入方通过互联网访问云闪付小程序开放接口API。
接入方如需申请通过专线接入云闪付APP小程序，请参考附录十二申请专线网络打通。



## 2. 开发、测试与上线



### 2.1 云闪付小程序全局设置

云闪付小程序默认使用云闪付标准小程序导航栏，可在小程序入网申请时，提交小程序全局导航栏默认背景色、透明度。



### 2.2 云闪付小程序开发

云闪付小程序开发基于通用语言开发，无需特定开发者工具和特定开发语言，小程序代码无需托管。
1. 小程序的开发方可使用市场成熟IDE工具开发自身业务功能。
2. 页面开发语言使用标准前端架构（html,js,css等），支持使用主流的框架，如vue.js等。
3. 云闪付小程序可使用多种云闪付标准UI组件、前后台开放API。小程序支持传统H5页面路由，同时也支持通过小程序API路由跳转。



### 2.3 云闪付小程序测试

接入方根据本文档完成开发后，可自行扫码测试。通过自行生成云闪付小程序码（建议可使用在线草料二维码平台https://cli.im/生成），使用云闪付APP打开：
https://applet.open.95516.com/*小程序id*
云闪付将自动跳转至接入方的小程序首页地址。
测试指引详见附件小程序测试指引。



### 2.4 云闪付小程序发布

1. 正式接入参数申请与分配，接入方提交正式上线的入网申请（如已经申请生产版本参数，则无需重新申请），并获取正式的接入参数；
2. 根据生产接入参数，小程序开发方进行服务上线部署；
3. 接入方根据云闪付小程序码标准，自主生码进行生产验证；
4. 验证完成后，申请小程序应用在云闪付上线。



## 3. 内容变更

接入方如需对接入云闪付APP的小程序或接入主体的基本信息进行变更，需提前5个工作日向云闪付提交申请。

